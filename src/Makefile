CXX = g++
CXXDEBUG =#-DDEBUG -g
CXXFLAGS = -std=c++14 -O2 -Wall -pedantic $(CXXDEBUG)
OBJECT_FILES = dijkstra.o highway-dimension.o hitting-set.o
BIN_FILES = main.out
TEST_FILES = hitting-set.test.out

all: $(BIN_FILES)

test: $(TEST_FILES)

%.out: %.o $(OBJECT_FILES)
	$(CXX) $(CXXFLAGS) $^ -o $@

%.test.out: %.test.o $(OBJECT_FILES)
	$(CXX) $(CXXFLAGS) $^ -o $@
	./$@

.PHONY: clean clean-all

clean:
	rm -f *.o

clean-all: clean
	rm -f *.out *.test

# Generated by g++ -MM *.cpp
dijkstra.o: dijkstra.cpp graph.h dijkstra.h
highway-dimension.o: highway-dimension.cpp highway-dimension.h graph.h \
 hitting-set.h dijkstra.h
hitting-set.o: hitting-set.cpp hitting-set.h graph.h
hitting-set.test.o: hitting-set.test.cpp graph.h hitting-set.h
main.o: main.cpp graph.h highway-dimension.h
